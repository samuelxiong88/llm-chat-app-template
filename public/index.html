<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>LLM Chat App</title>

    <!-- 企业级 Markdown 版式（含浅/深色） -->
    <style>
      /* ===== 基础变量（浅色） ===== */
      :root{
        --bg:#f7f8fa;--panel-bg:#ffffff;--text:#1b1f24;--muted:#6b7280;--border:#e5e7eb;
        --primary:#0ea5e9;--accent:#475569;--code-bg:#0b1020;--code-text:#e6edf3;
        --quote-bg:#f3f6fb;--quote-bar:#c7d2fe;--shadow:0 8px 24px rgba(2,6,23,.08);
        --radius:16px;--radius-sm:10px;--maxw:880px;--line:1.7;
      }
      @media (prefers-color-scheme: dark){
        :root{
          --bg:#0b1020;--panel-bg:#0f172a;--text:#e6edf3;--muted:#94a3b8;--border:#1f2937;
          --primary:#38bdf8;--accent:#a5b4fc;--code-bg:#0a0f1d;--code-text:#e6edf3;
          --quote-bg:#0e162b;--quote-bar:#3b82f6;--shadow:0 8px 24px rgba(0,0,0,.35);
        }
      }

      /* ===== 页面与容器 ===== */
      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        background:var(--bg);color:var(--text);
        font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,PingFang SC,Microsoft YaHei,Helvetica,Arial;
        line-height:var(--line);margin:0;
        display:flex;flex-direction:column;
      }
      header{
        text-align:center;padding:16px 12px;border-bottom:1px solid var(--border);
        background:var(--panel-bg);
      }
      header h1{margin:0;font-size:20px;color:var(--primary);font-weight:700}
      header p{margin:6px 0 0;color:var(--muted);font-size:14px}

      .chat-container{
        flex:1;display:flex;flex-direction:column;
        max-width:calc(var(--maxw) + 32px);margin:0 auto;width:100%;
      }
      #chat-messages{
        flex:1;overflow-y:auto;padding:24px 16px 96px; /* 底部留白给输入框 */
        max-width:var(--maxw);width:100%;margin:0 auto;
      }

      /* ===== 消息气泡（与 chat.js 渲染一致） ===== */
      .message{display:flex;margin:14px 0}
      .message .message-body{
        width:100%;background:var(--panel-bg);box-shadow:var(--shadow);
        border:1px solid var(--border);border-radius:var(--radius);padding:18px 20px;
      }
      .user-message .message-body{border-left:4px solid var(--primary)}
      .assistant-message .message-body{border-left:4px solid var(--accent)}

      /* ===== Markdown 样式作用域 ===== */
      .message-body{color:var(--text);font-size:15.5px;letter-spacing:.1px}
      .message-body p{margin:10px 0 12px}
      .message-body h1,.message-body h2,.message-body h3{
        line-height:1.35;font-weight:650;color:var(--accent);margin:18px 0 10px
      }
      .message-body h1{font-size:22px;border-bottom:1px solid var(--border);padding-bottom:8px}
      .message-body h2{font-size:19px;border-bottom:1px solid var(--border);padding-bottom:6px}
      .message-body h3{font-size:17px}
      .message-body ul,.message-body ol{margin:8px 0 12px 20px;padding:0}
      .message-body li{margin:4px 0}
      .message-body li::marker{color:var(--muted)}
      .message-body ul ul,.message-body ol ol{margin-top:4px;margin-bottom:4px}
      .message-body hr{border:none;border-top:1px solid var(--border);margin:16px 0}
      .message-body blockquote{
        margin:12px 0;padding:10px 14px;border-left:4px solid var(--quote-bar);
        background:var(--quote-bg);border-radius:var(--radius-sm);color:var(--text)
      }
      .message-body code{
        background:rgba(2,6,23,.06);padding:2px 6px;border-radius:6px;
        font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;font-size:90%;
      }
      @media (prefers-color-scheme: dark){
        .message-body code{background:rgba(255,255,255,.07)}
      }
      .message-body pre{background:var(--code-bg);color:var(--code-text);padding:14px 16px;
        border-radius:var(--radius);overflow:auto;border:1px solid rgba(255,255,255,.06);margin:12px 0}
      .message-body pre code{background:transparent!important;color:var(--code-text);font-size:13.5px}
      .message-body table{
        width:100%;border-collapse:separate;border-spacing:0;margin:12px 0;
        border:1px solid var(--border);border-radius:var(--radius-sm);overflow:hidden
      }
      .message-body th,.message-body td{padding:10px 12px;border-bottom:1px solid var(--border)}
      .message-body th{background:rgba(2,132,199,.06);color:var(--accent);text-align:left;font-weight:600}
      .message-body tr:nth-child(even) td{background:rgba(2,6,23,.02)}
      .message-body tr:hover td{background:rgba(14,165,233,.06)}
      .message-body a{color:var(--primary);text-decoration:none;border-bottom:1px dashed rgba(14,165,233,.5)}
      .message-body a:hover{text-decoration:underline}
      .message-body strong{font-weight:700}
      .message-body .next-step{margin-top:10px;color:var(--muted);font-size:14px}

      /* 打字中提示 */
      #typing-indicator{opacity:0;max-width:var(--maxw);margin:0 auto;color:var(--muted);font-style:italic;padding:0 16px}
      #typing-indicator.visible{opacity:1;transition:opacity .2s ease}

      /* ===== 输入区 ===== */
      .message-input{
        position:fixed;left:0;right:0;bottom:0;background:var(--panel-bg);
        border-top:1px solid var(--border);box-shadow:0 -6px 20px rgba(2,6,23,.06);
      }
      .message-input .inner{
        max-width:calc(var(--maxw) + 32px);margin:0 auto;padding:12px 16px;display:flex;gap:8px
      }
      #user-input{
        flex:1;padding:.75rem;border:1px solid var(--border);border-radius:10px;
        font-family:inherit;resize:none;min-height:44px;background:var(--panel-bg);color:var(--text)
      }
      #send-button{
        padding:0 16px;background:var(--primary);color:#fff;border:none;border-radius:10px;cursor:pointer;
        transition:transform .05s ease, background .2s ease;height:44px
      }
      #send-button:hover{background:#0c9bd6}
      #send-button:active{transform:translateY(1px)}
      #send-button:disabled{background:var(--muted);cursor:not-allowed}
    </style>
  </head>

  <body>
    <header>
      <h1>ChatGPT AI Chat</h1>
      <p>Powered by Cestoil Workers AI</p>
    </header>

    <div class="chat-container">
      <div id="chat-messages">
        <!-- 首条欢迎消息：与 chat.js 结构一致（.message-body） -->
        <div class="message assistant-message">
          <div class="message-body">
            Hello! I'm an ChatGPT app powered by Cestoil Workers AI. How can I help you today?
          </div>
        </div>
      </div>

      <div id="typing-indicator">AI is thinking...</div>
    </div>

    <!-- 固定输入区 -->
    <div class="message-input">
      <div class="inner">
        <textarea id="user-input" placeholder="Type your message here..." rows="1" autofocus></textarea>
        <button id="send-button">Send</button>
      </div>
    </div>

    <!-- Chat app script -->
    <script src="chat.js"></script>
  </body>
</html>
